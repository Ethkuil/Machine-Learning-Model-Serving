# 使用手册

分别使用`npm run dev`和`flask run`启动前端和后端服务器。访问`http://localhost:8080/`即可看到项目首页。

## 后端使用手册

* 若要查看接口文档，请访问[在线接口文档](https://www.apifox.cn/apidoc/shared-333a8de7-4ea7-4c19-b85d-d7c30147af8d)。
* 若要对后端进行单元测试，可将后端test文件夹中的相应json文件导入Apifox或Postman中，然后在相应软件中进行测试。也可使用文件夹中的测试数据自行测试。

## 前端使用手册

URL的前缀为`http://localhost:8080/`.

本目录下有[演示视频](./演示视频.mkv)，可以查看。此外，本项目的UI简洁明确、提示清晰，实际上不查看下面的使用手册也能正确使用——唯一需要注意的地方是输入`json`时，`base64`编码的文件应采用如下格式输入：

```json
"variable_name": {
    "type": "base64",
    "value": your_base64_string
}
```



进行测试所需的模型文件、数据集文件可在后端项目的`test`文件夹中获得。

## 主页

![主页](.\assets\主页.png)

页面上方的标签栏中有4个标签，可点击切换不同标签页。

## 模型标签页

![模型标签页](.\assets\模型标签页.png)

点击导入模型按钮，弹出1个表格：

![导入模型表格](.\assets\导入模型表单.png)

按提示填写各项后，点击右下角的导入按钮即可导入模型。若一切顺利，你将看到“模型添加成功”的提示。否则请根据提示修改表单，例如模型文件与所选类型不匹配、模型文件无效。

![模型添加失败——模型无效](.\assets\模型添加失败——模型无效.png)

![有数据的模型表格](.\assets\有数据的模型表格.png)

表格行的最右列是操作列，可在此点击“详情”或“删除”。点击“详情”，则跳转至相应模型的详情页面；点击“删除”，则删除相应模型并立即更新表格。

可点击表格上的小三角形进行排序（默认按更新时间倒序排列）。搜索框中可输入模型的名称以筛选模型。

![模型搜索排序示例](.\assets\模型搜索排序示例.png)

（搜索名称中含有“示例”的模型，并按名称正序排列。）

### 模型详情页

![模型详情页](.\assets\模型详情页.png)

点击左上角的“返回”可跳转到上一处，即模型标签页。

灰色区域内可查看当前模型的名称、描述、修改日期、类型这些基本属性。有3个可选的标签页，「概述」、「部署」、「测试」。

#### 概述

概述中可查看模型的输入变量与目标变量信息。

#### 部署

![模型的部署标签页](.\assets\模型的部署标签页.png)

部署中可查看该模型的所有部署，即所有「服务」与「任务」。使用方法类似模型标签页。

点击添加服务、添加任务按钮会弹出表单，正确填写并提交后即可添加服务或任务。

成功添加服务后，会自动跳转到该服务的详情页面。

成功添加任务后，会自动关闭表单并更新数据（数据量较小时，这个时间差就足够让任务进入「完成」状态）。

任务表单中的「数据集」支持csv文件与zip文件。

![添加任务表单](.\assets\添加任务表单.png)

在模型详情页里，不仅可以查看，还可以管理该模型的所有「服务」与「部署」。

![有数据的部署表格](.\assets\有数据的部署表格.png)

「操作」列与模型表格一样，在最右侧。

「任务」仅当状态为「成功」时才显示「下载结果」选项。下载的文件名则是在提交的数据集的文件名后加上`_result`，具有很好的可读性。

![下载任务结果](.\assets\下载任务结果.png)

#### 测试

![模型的测试标签页](.\assets\模型的测试标签页.png)

左侧为输入部分，会自动列出本模型的所有输入变量，排成表单供输入其值。

默认提供文本输入，如有需要，可点击「文件」选框，则文本框变为添加文件的按钮，则以所添加的文件作为该变量的值。

![使用文件输入](.\assets\使用文件输入.png)

点击提交后，若输入正确，则会看到「提交成功」的提示，并在输出区域看到返回的结果。可点击copy复制返回结果。

![测试模型返回结果](.\assets\测试模型返回结果.png)

也可点击「输入」区域右上角的`JSON`字样，在弹出的对话框中输入`JSON`文本，从而以`JSON`格式发送测试请求。

## 服务标签页

![服务标签页](.\assets\服务标签页.png)

服务标签页显示当前全部服务。形式与使用方法均与之前的例子非常相似，在此不再赘述。

「开始时间」列指的是该服务**最近一次启动**的时间，而非其创建时间。即每次暂停-启动后该时间会自动更新。

点击「添加服务」按钮，则将跳转至模型标签页，并提示选择所需模型。用户找到所需模型后，可进入详情页开始部署。

![在服务标签页点添加服务](.\assets\在服务标签页点添加服务.png)

### 服务详情页

![服务详情页](.\assets\服务详情页.png)

服务详情页中提供了快速返回接口的调用。

![快速返回接口-base64](.\assets\快速返回接口-base64.png)

上图提供了使用`base64`的示例。

暂停服务后的显示：

![暂停服务后的快速返回接口](.\assets\暂停服务后的快速返回接口.png)

## 任务标签页

任务标签页显示当前所有任务。

![任务标签页](.\assets\任务标签页.png)

和模型的部署标签页一样，任务标签页也可以很方便地管理任务。

## 其他

删除模型后，其关联的服务与任务也会自动被删除。

